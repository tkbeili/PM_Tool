<h1>Projects#show</h1>
<p>Find me in app/views/projects/show.html.erb</p>


<h4><%= @project.title %></h4>
<p><%= @project.description %></p>
<p><%= @project.due_date %></p>
<p>Created By: <%= @project.user_first_name %></p>


<% if user_signed_in? && current_user.has_favourited?(@project) %>
  <% @favourite = current_user.favourites.find_by_project_id(@project.id) %>
  <%= link_to "NO Favourite", project_favourite_path(@project, @favourite), class: "btn btn-danger", method: :delete%>
<% else %>
  <%= link_to "Favourite", project_favourites_path(@project), class: "btn btn-info", method: :post%>
<% end %>




<p><%= link_to "EDIT", edit_project_path(@project) %></p>
<p><%= link_to "DELETE", project_path(@project), method: :delete, data: {confirm: "Are you use you want to delete this project?"} %></p>

<div class="discussions-box">
  <% if @project.discussions.present? %>
    <h3>Discussions</h3>
    <% @project.discussions.each do |discussion| %>
      <div class="well well-sm">
      <h4><%= link_to discussion.title, [@project, discussion] %></h4>
      <p><%= discussion.description %></p>
    </div>
    <% end %>
  <% end %>

  <h4>Add a Discussion</h4>

  <%= render "discussions/form" %>
</div>

<div class="tasks-box">
  <% if @project.tasks.present? %>
    <h3>Tasks To Do</h3>
    <% @project.tasks.each do |task| %>
      <% if task.status == false %>
        <div class="well well-sm">
          <h4><%= link_to task.title, edit_project_task_path(@project, task) %></h4>
          <p><%= task.details %></p>
          <p>Task Initiated By: <%= task.user_first_name %></p>
          <!-- <span class="glyphicon glyphicon-check" aria-hidden="true"></span> -->
          <p><%= link_to " Incomplete", project_task_path(@project, task, 
                task: { status: true }), method: :patch, class: "right glyphicon glyphicon-fire btn btn-danger" %></p>
        </div>
      <% end %>
    <% end %>
  <% end %>
</div>

<div class="other-box">
  <% if @project.tasks.present? %>
    <h3>Completed Tasks</h3>
    <% @project.tasks.each do |task| %>
      <% if task.status === true %>
        <div class="well well-sm">
          <h4><%= link_to task.title, edit_project_task_path(@project, task) %></h4>
          <p><%= task.details %></p>
          <p>Task Initiated By: <%= task.user_first_name %></p>
          <p><%= link_to " Completed", project_task_path(@project, task, 
                task: { status: false }), method: :patch, class: "glyphicon glyphicon-check btn btn-success" %></p>
        </div>
      <% end %>
    <% end %>
  <% end %>
</div>

<div class="form-box">
  <h4>Add a Task</h4>
  <%= render "tasks/form" %>
</div>




