<h1>Projects#show</h1>
<p>Find me in app/views/projects/show.html.erb</p>

<h3><%= @project.title %></h3>
<p><%= @project.description %></p>
<p>Due Date: <%= @project.due_date %></p>
<p>Created By: <%= @project.user_first_name %></p>

<% if @project.members.any? %>
  <div>
    <h4>Project Members:</h4>
    <% @project.members.each do |member| %>
      <li><%= User.find(member.user_id).full_name %></li>
    <% end %>
  </div>
<% end %>
<br>

<!-- Favourite Button -->
<% unless @project.user == current_user %>
  <% if user_signed_in? && current_user.has_favourited?(@project) %>
    <% favourite = current_user.favourites.find_by_project_id(@project.id) %>
    <%= link_to "NO Favourite", project_favourite_path(@project, favourite), class: "btn btn-danger", method: :delete%>
  <% else %>
    <%= link_to "", project_favourites_path(@project), class: "btn btn-primary glyphicon glyphicon-heart", method: :post%>
  <% end %>
<% end %>
<p><%= link_to "EDIT", edit_project_path(@project), class: "btn btn-info" %></p>
<p><%= link_to "DELETE", project_path(@project), method: :delete, data: {confirm: "Are you use you want to delete this project?"}, class: "btn btn-danger" %></p>

<!-- Discussion -->
<div class="discussions-box">
  <h3>Add a Discussion</h3>
  <div class="discussion-form">
    <%= render "discussions/form" %>
  </div>
  <% if @project.discussions.any? %>
    <h3>Discussions</h3>
    <div class="discussions">
      <% @project.discussions.each do |discussion| %>

      <%= render partial: "/discussions/discussion", locals: {discussion: discussion} %>

      <% end %>
    </div>
  <% end %>
</div>

<div class="form-box">
  <h3>Add a Task</h3>
  <div class='task-form'>
    <%= render "tasks/form" %>
  </div>
</div>

<!-- Tasks 1 -->
<% if @project.tasks.any? %>
  <div class="tasks-box">
    <h3>Tasks To Do</h3>
    <div class="incomplete">
      <% @project.tasks.each do |task| %>
        <%= render partial: "/tasks/incomplete", locals: {task: task} %>
      <% end %>
    </div>
  </div>
<% end %>

<!-- Tasks Done -->
<% if @project.tasks.any? %>
  <div class="other-box">
    <h3>Completed Tasks</h3>
    <% @project.tasks.each do |task| %>
      <% if task.status === true %>
        <div class="well well-sm">
          <h4><%= link_to task.title, edit_project_task_path(@project, task) %></h4>
          <p><%= task.details %></p>
          <p>Task Initiated By: <%= task.user_first_name %></p>
          <p><%= link_to " Completed", project_task_path(@project, task, 
                task: { status: false }), method: :patch, class: "glyphicon glyphicon-check btn btn-success" %></p>
        </div>
      <% end %>
    <% end %>
  </div>
<% end %>





