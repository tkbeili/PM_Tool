<h1>Projects#show</h1>

<h3><%= @project.title %></h3>
<p><%= @project.description %></p>
<p>Due Date: <%= @project.due_date %></p>
<p>Created By: <%= @project.user_first_name %></p>

<% if @project.members.any? %>
  <div>
    <h4>Project Members:</h4>
    <% @project.members.each do |member| %>
      <li><%= User.find(member.user_id).full_name %></li>
    <% end %>
  </div>
<% end %>
<br>

<!-- Favourite Button -->
<p>
<% unless @project.user == current_user %>
  <% if user_signed_in? && current_user.has_favourited?(@project) %>
    <% favourite = current_user.favourites.find_by_project_id(@project.id) %>
    <%= link_to " ", project_favourite_path(@project, favourite), class: "glyphicon glyphicon-heart btn btn-warning btn-sm", method: :delete%>
  <% else %>
    <%= link_to " ", project_favourites_path(@project), class: "glyphicon glyphicon-heart btn btn-danger", method: :post%>
  <% end %>
<% end %>
<%= link_to "EDIT", edit_project_path(@project), class: "btn btn-info btn-xs" %> <%= link_to "DELETE", project_path(@project), method: :delete, data: {confirm: "Are you use you want to delete this project?"}, class: "btn btn-danger btn-xs" %></p>

<!-- Discussion -->
<div class="discussions-box">
  <h3>Add a Discussion</h3>
  <div class="discussion-form">
    <%= render "discussions/form" %>
  </div>
  <%# if @project.discussions.any? %>
    <h3>Discussions</h3>
    <div class="discussions">
      <% @project.discussions.each do |discussion| %>

      <%= render partial: "/discussions/discussion", locals: {discussion: discussion} %>

      <% end %>
    </div>
  <%# end %>
</div>

<div class="form-box">
  <h3>Add a Task</h3>
  <div class='task-form'>
    <%= render "tasks/form" %>
  </div>
</div>

<!-- Tasks 1 -->
<%# if @project.tasks.any? %>
  <div class="tasks-box">
    <h3>Tasks To Do</h3>
    <div class="incomplete">
      <% @project.tasks.each do |task| %>
        <%= render partial: "/tasks/incomplete", locals: {task: task} %>
      <% end %>
    </div>
  </div>
<%# end %>

<!-- Tasks Done -->
<%# if @project.tasks.any? %>
  <div class="other-box">
    <h3>Completed Tasks</h3>
    <div class="complete">
      <% @project.tasks.each do |task| %>
        <%= render partial: "/tasks/complete", locals: {task: task} %>
      <% end %>
    </div>
  </div>
<%# end %>





